!function o(c,s,u){function r(e,t){if(!s[e]){if(!c[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var a=s[e]={exports:{}};c[e][0].call(a.exports,function(t){return r(c[e][1][t]||t)},a,a.exports,o,c,s,u)}return s[e].exports}for(var l="function"==typeof require&&require,t=0;t<u.length;t++)r(u[t]);return r}({1:[function(t,e,i){"use strict";var a=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),o="";new(function(){function i(){!function(t,e){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.account,this.pass,this.accountIcon,this.passIcon,this.accountRect,this.passRect,this.dataStorage=[],this.getConfig()}return a(i,[{key:"getConfig",value:function(){var e=this;chrome.storage.sync.get(function(t){t.hasOwnProperty("apiHost")&&t.apiHost&&(o=t.apiHost,e.pageDidMount())})}},{key:"isVisible",value:function(t){return 0<t.offsetWidth&&0<t.offsetHeight}},{key:"randomString",value:function(t){t=t||32;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,i="",a=0;a<t;a++)i+=e.charAt(Math.floor(Math.random()*n));return i}},{key:"clearFillIcon",value:function(){for(var t=document.querySelectorAll(".passcan-autofill"),e=0;e<t.length;e++)document.body.removeChild(t[e]);this.account=null,this.pass=null,this.accountIcon=null,this.passIcon=null,this.accountRect=null,this.passRect=null}},{key:"findInput",value:function(){for(var t=document.querySelector('input[type="password"]'),e=document.querySelectorAll('input[type="text"]'),n=null,i=0;i<e.length;i++)if("string"!=typeof e[i].getAttribute("disabled")&&"string"!=typeof e[i].getAttribute("readonly")&&this.isVisible(e[i])){n=e[i];break}t&&"string"!=typeof t.getAttribute("disabled")&&"string"!=typeof t.getAttribute("readonly")&&this.isVisible(t)?(this.pass!=t&&((this.pass=t).setAttribute("autocomplete","off"),t.dataset.passcaninput="password"),this.addFillIcon(t,"pass"),n&&(this.account!=n&&((this.account=n).setAttribute("autocomplete","off"),n.dataset.passcaninput="text"),this.addFillIcon(n,"account"))):(this.accountIcon||this.passIcon)&&this.clearFillIcon()}},{key:"addFillIcon",value:function(t,e){var n=t.getBoundingClientRect(),i=void 0,a=void 0;if("pass"==e?(i=this.passIcon,a=this.passRect):"account"==e&&(i=this.accountIcon,a=this.accountRect),i){if(n.left==a.left&&n.width==a.width&&n.top==a.top&&n.height==a.height)return;return console.log("in change Icon"),i.style.left=n.left+(n.width-16-.02*n.width)+"px",i.style.top=n.top+(n.height-16)/2+"px",void("pass"==e?this.passRect=n:"account"==e&&(this.accountRect=n))}var o=document.createElement("IMG"),c="passcanFill-"+this.randomString(8);o.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAFIGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDctMjdUMTQ6MTg6MjkrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA3LTI3VDE1OjU1OjE1KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA3LTI3VDE1OjU1OjE1KzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjU0ZmExNzNjLTk2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",o.className="passcan-autofill",o.id=c,o.style.left=n.left+(n.width-16-.02*n.width)+"px",o.style.top=n.top+(n.height-16)/2+"px",document.body.appendChild(o);var s=document.querySelector("#"+c);this.addIconEvent(s),"pass"==e?(this.passIcon=s,this.passRect=n):"account"==e&&(this.accountIcon=s,this.accountRect=n)}},{key:"getSuggest",value:function(){return new Promise(function(e,n){chrome.runtime.sendMessage({event:"getSuggest",host:window.location.origin},function(t){if(200==t.status)return e(t.data);n(t)})})}},{key:"addPassMenu",value:function(t,e){var i=this;this.dataStorage=[];var n=t.getBoundingClientRect(),a=document.createElement("div");a.id="passcanDialog",a.style.right=window.innerWidth-n.left-n.width+"px",a.style.top=n.top+n.height+10+"px",a.innerHTML="",document.body.appendChild(a),this.getSuggest().then(function(t){i.dataStorage=t;var n="";t.map(function(t,e){n+='<div class="row hasRipple" data-key="'+e+'">\n                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADFElEQVRoQ+2YS0wTURSG/zNtCe58xBfWKcjSjUtduEKFTogPVupCBY0LH2mrxODOnRoMMwUSE2N8LFBZqkkLARIXJsbEndEVgp0SxKgxriTtdI4pCinSx0zntg1hur3/+e/5/nM7vR3CKv/QKu8fLkCtJ+hOwJ2AwwTcI+QwQMfl7gQcR+jQYG1MoGVwZpPP4KMEswNAM5j8RJxmYJqYphmYIsZw7Ir8zmGgtsuLTkAZnA2wYfQAfJZAvlLuDJ5g8twcCfknSmlFrRcEUKL6EWZ+RqB6u5sx4248Il+wW1eOPi+AEk2EwKSVY7hYw4AWD8sRJx5WalcAKFqinUEvCM5vqtWAWAZwcEBv8BmYBGGdFXorGpN4/0go8NqKthzNMoCgpg8RcLIco0I1DAzHw/JxkZ65XksAhwbmmryZ1JTojZhhUF39ztjFLXOivbN+SwBBTb9KwJ3im/AcmzjvNX1vsjpDSu8jCfcA2laJ5op5xsLyQu9LAIqaGAPRgSJH4ZvhwZ6xy/JsrqZV/bzdQ/QBoA3VhFgBENT0Scr+yhb4mMRnRkKBx/mW26KJ0xLTo9oCqHqaCN5CTXgM7+aX3Q3f86239yV3mBLP1BZAS6SKXReKAQT7Z/xkmsmaAihq4hOIdhVsgtAVC8kP860rUb0TjAc1BQhqiXECtRRugn9mmHePRhq/5Gr+Hh/zfe2/xKreTYTeEo/RrwDOsVT31ptiznjTewHcB2hrNdPP7rXyKdSvN5OJSdGNMHg+5fX4Jy75fxTzVjSdrTz3/9csu0ooqv4EhBNiIbg3Fg5cK+UpBKBN/dIoIf1R1GXOavpZOCEAWaM2TT8sAc9LJWZlncG34+FAjxWtMIB/EBEJ6LOyccGrByP+e32m41Vn07wVH6EACxBqskOC+RREdVYayNUw81D8l3wKN8i0WiscYOFcDs4GYBjXGdxl9U+9ybg1GgmMW218UVcRgEXz1r7kRpJwrJKvVSoKYDfNaurXxpu5aiZqdy93AnYTE613JyA6Ubt+7gTsJiZa705AdKJ2/Vb9BP4AaaooQMIVwOMAAAAASUVORK5CYII="><span>'+t.uname+'</span>\n                        <span class="ripple"></span>\n                    </div>'}),n||(n='<div class="tip">找不到此网址的网站。 您可以登录此网站以保存凭据</div>'),document.getElementById("passcanDialog").innerHTML=n}).catch(function(t){501==t.status?document.getElementById("passcanDialog").innerHTML='<div class="tip">尚未登录。 您可以登录后获取此网站已保存的凭据</div><button class="lg-btn">登 录</button>':document.getElementById("passcanDialog").innerHTML='<div class="tip">找不到此网址的网站。 您可以登录此网站以保存凭据</div>'})}},{key:"login",value:function(){window.open(o+"/api/login","_blank","width=700, height=600, titlebar=0, menubar=0,directories=0")}},{key:"addIconEvent",value:function(e){var n=this;e.addEventListener("click",function(t){document.querySelector("#passcanDialog")||setTimeout(function(){n.addPassMenu(e,t)}),t.preventDefault()})}},{key:"hasParent",value:function(t,e){if(!t)return!1;if(9==t.nodeType)return!1;var n=t.id;return"BODY"!=t.nodeName&&(n&&n===e?n==e||void 0:this.hasParent(t.parentNode,e))}},{key:"hasChild",value:function(t,e){return t.contains?t!=e&&t.contains(e):!!(16&t.compareDocumentPosition(e))}},{key:"closeDialog",value:function(){var t=document.querySelector("#passcanDialog");document.body.removeChild(t)}},{key:"fireOnchange",value:function(t){try{var e=t.ownerDocument.createEvent("Events");e.initEvent("change",!0,!0),t.dispatchEvent(e),(e=t.ownerDocument.createEvent("Events")).initEvent("input",!0,!0),t.dispatchEvent(e),void 0!==ischrome&&ischrome&&"function"==typeof t.onkeyup&&(n&&(e.keyCode=8),t.onkeyup(e))}catch(t){}}},{key:"getQuery",value:function(){var t=location.search||"",e=(t=t.substr(1,t.length-1)).split("&"),n={};return 0<e.length&&e.map(function(t){var e=t.split("=");n[e[0]]=e[1]}),n}},{key:"getCookie",value:function(){var t=document.cookie.split(";"),n={};return t.map(function(t){var e=t.split("=");n[e[0]]=e[1]}),n}},{key:"pageDidMount",value:function(){var u=this,t=this.getQuery();if(t.hasOwnProperty("from")&&"passcan"==t.from){var e=t.api_token;e&&(chrome.runtime.sendMessage({event:"login",data:e},function(t){}),window.close())}else{document.addEventListener("click",function(t){if("lg-btn"==t.target.className&&(u.login(),u.closeDialog()),u.hasParent(t.target,"passcanDialog")){if(-1<t.target.className.indexOf("hasRipple")||-1<(t.target.parentNode.className||"").indexOf("hasRipple")){var i=t.target;-1<t.target.parentNode.className.indexOf("hasRipple")&&(i=t.target.parentNode);var e=i.getBoundingClientRect().left,n=i.getBoundingClientRect().top,a=i.getBoundingClientRect().width,o=i.getBoundingClientRect().height;o<=a?o=a:a=o;var c=t.clientX-e-a/2,s=t.clientY-n-o/2;i.childNodes[4].style.cssText="width: "+a+"px;height: "+o+"px;top: "+s+"px;left: "+c+"px",i.childNodes[4].className="ripple rippleEffect",setTimeout(function(){i.childNodes[4].className="ripple";var t=i.dataset.key,e=u.dataStorage[t].uname,n=u.dataStorage[t].pwd;u.account.focus(),u.account.value=e,u.fireOnchange(u.account),u.pass.focus(),u.pass.value=n,u.fireOnchange(u.pass),u.closeDialog()},250)}}else document.querySelector("#passcanDialog")&&u.closeDialog()});var n=null;new MutationObserver(function(t){t.map(function(t){"attributes"==t.type&&t.target.getAttribute(t.attributeName)!==t.oldValue&&(clearTimeout(n),n=setTimeout(function(){0<document.querySelectorAll("input").length?u.findInput():u.clearFillIcon()},100))})}).observe(document.body,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0}),this.findInput(),window.addEventListener("resize",function(t){u.findInput()})}chrome.runtime.onMessage.addListener(function(t,e,n){switch(t.event){case"updateAPI":var i=t.apiHost;o=i;break;case"getFormValue":n({account:u.account.value||"",pass:u.pass.value||""})}})}}]),i}())},{}]},{},[1]);